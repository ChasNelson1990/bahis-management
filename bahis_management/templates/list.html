{% extends 'base.html' %}

{% block content %}

{% block content_title %}
<h1>Template List View</h1>
{% endblock content_title %}

{% block content_list %}
<div class="row">
    <div class="col s12 right-align">
        <a href="{% url 'desk_modules:create' %}" class="btn-floating btn-large waves-effect waves-light"><i class="material-symbols-outlined">add</i></a>
    </div>
</div>

<ul class="collapsible">
    <li>
        <div class="collapsible-header">
            <i class="material-symbols-outlined">search</i> Filter
        </div>
        <div class="collapsible-body">
            <form method="get">
                {{ filter.form.as_p }}
                <input  class="btn waves-effect" type="submit" />
            </form>
        </div>
    </li>
</ul>

{% if object_list %}
<table class="striped centered responsive-table">
    <thead>
        <tr>
            {% block table_headers %}
            <th>Table headers go here</th>
            {% endblock table_headers %}
            <th></th>{# for the update and delete buttons #}
        </tr>
    </thead>

    <tbody>
        {% for module in object_list %}
            <tr>
                {% block table_rows %}
                <td>Table data goes here</td>
                {% endblock table_rows %}
                <td>
                    <a href="{% url 'desk_modules:delete' module.id %}"><i class="material-symbols-outlined">delete</i></a>
                    <a href="{% url 'desk_modules:update' module.id %}"><i class="material-symbols-outlined">edit</i></a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<div class="row">
    <div class="col s12 right-align">
        <ul class="pagination">
            <li class="waves-effect {% if not page_obj.has_previous %}disabled{% endif %}"><a href="?page=1{% for k, v in query.items %}&{{ k }}={{ v }}{% endfor %}"><i class="material-symbols-outlined">first_page</i></a></li>
            <li class="waves-effect {% if not page_obj.has_previous %}disabled{% endif %}"><a href="?page={% if page_obj.has_previous %}{{ page_obj.previous_page_number }}{% endif %}{% for k, v in query.items %}&{{ k }}={{ v }}{% endfor %}"><i class="material-symbols-outlined">chevron_left</i></a></li>
            {% for page in paginator_range %}
                <li class="waves-effect {% if page == page_obj.number %}active{% endif %}"><a href="?page={{ page }}{% for k, v in query.items %}&{{ k }}={{ v }}{% endfor %}">{{ page }}</a></li>
            {% endfor %}
            <li class="waves-effect {% if not page_obj.has_next %}disabled{% endif %}"><a href="?page={% if page_obj.has_next %}{{ page_obj.next_page_number }}{% endif %}{% for k, v in query.items %}&{{ k }}={{ v }}{% endfor %}"><i class="material-symbols-outlined">chevron_right</i></a></li>
            <li class="waves-effect {% if not page_obj.has_next %}disabled{% endif %}"><a href="?page={{ page_obj.paginator.num_pages }}{% for k, v in query.items %}&{{ k }}={{ v }}{% endfor %}"><i class="material-symbols-outlined">last_page</i></a></li>
        </ul>
    </div>
</div>
{% else %}
    <p>No data found.</p>
{% endif %}
{% endblock content_list %}

{% endblock content %}

{% block inline_javascript %}
    <script>
        $(document).ready(function(){
            // Initialize materialize accordians
            $('.collapsible').collapsible();
        });
    </script>
{% endblock inline_javascript %}
